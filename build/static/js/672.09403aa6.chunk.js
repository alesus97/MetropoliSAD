"use strict";(self.webpackChunkmetropolisad=self.webpackChunkmetropolisad||[]).push([[672],{74991:function(e,t,n){n.d(t,{t:function(){return o}});var i=n(48051),r="cinema-sad",o={getAllSpettacoli:function(e){return i.b.get(r,"/cinema/".concat(e,"/spettacoli"),{response:!0})},deleteSpettacolo:function(e){return i.b.del(r,"/spettacoli/".concat(e),{response:!0})},createSpettacolo:function(e,t){var n={body:t,response:!0};return i.b.post(r,"/sale/".concat(e,"/spettacoli"),n)},getAllSale:function(e){return i.b.get(r,"/cinema/".concat(e,"/sale"),{response:!0})},deleteSala:function(e){return i.b.del(r,"/sale/".concat(e),{response:!0})},createSala:function(e,t){var n={body:t,response:!0};return i.b.post(r,"/cinema/".concat(e,"/sale"),n)},getAllFilms:function(){return i.b.get(r,"/film",{response:!0})},deleteFilm:function(e){return i.b.del(r,"/film/".concat(e),{response:!0})},createFilm:function(e){var t={body:e,response:!0};return i.b.post(r,"/film",t)},getAllQuestions:function(e){return i.b.get(r,"/film/".concat(e,"/domande"),{response:!0})},deleteQuestion:function(e){return i.b.del(r,"/domande/".concat(e),{response:!0})},createQuestion:function(e,t){var n={body:t,response:!0};return i.b.post(r,"/film/".concat(e,"/domande"),n)},getAllPrizes:function(){return i.b.get(r,"/premi",{response:!0})},deletePrize:function(e){return i.b.del(r,"/premi/".concat(e),{response:!0})},createPrize:function(e){var t={body:e,response:!0};return i.b.post(r,"/premi",t)},getAllCinemas:function(){return i.b.get(r,"/cinema",{response:!0})},deleteCinema:function(e){return i.b.del(r,"/cinema/".concat(e),{response:!0})},createCinema:function(e){var t={body:e,response:!0};return i.b.post(r,"/cinema",t)},getPostiDisponibili:function(e){return i.b.get(r,"/spettacoli/".concat(e,"/disponibilita"),{response:!0})},getBiglietti:function(){return i.b.get(r,"/biglietti",{response:!0})},createBiglietto:function(e,t){var n={body:e,response:!0};return i.b.post(r,"/spettacoli/".concat(t,"/biglietti"),n)},getProfilo:function(){return i.b.get(r,"/user",{response:!0})}}},25578:function(e,t,n){n.d(t,{Z:function(){return c}});n(72791);var i=n(39157),r=n(51691),o=n(53767),a=n(20890),l=n(60753),s=n(80184);function c(e){return(0,s.jsx)(i.Z,{children:(0,s.jsx)(r.Z,{component:"div",id:"alert-dialog-description",children:(0,s.jsxs)(o.Z,{justifyContent:"space-between",direction:{xs:"column",sm:"row"},spacing:2,children:[(0,s.jsx)(l.Z,{color:"error"}),(0,s.jsxs)(a.Z,{textAlign:"center",children:[" ",e.onDeleteMessage]}),(0,s.jsx)(l.Z,{color:"error"})]})})})}},46727:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(70885),r=n(72791),o=n(5289),a=n(65661),l=n(94721),s=n(39157),c=n(91614),d=n(64554),u=n(60627),f=n(19658),h=n(53767),m=n(36151),p=n(15773),x=n(80184);function g(e){var t=(0,r.useState)(!1),n=(0,i.Z)(t,2),g=n[0],Z=n[1],j=(0,r.useState)(!1),b=(0,i.Z)(j,2),v=b[0],C=b[1],y=(0,r.useState)([]),w=(0,i.Z)(y,2),D=w[0],S=w[1],k=function(){e.setCloseDialog(),C(!1),S("")};return(0,x.jsx)("div",{children:(0,x.jsxs)(o.Z,{open:e.openDialog,fullWidth:!0,maxWidth:"sm",onClose:k,children:[(0,x.jsx)(a.Z,{align:"center",children:e.title}),(0,x.jsx)(l.Z,{}),(0,x.jsx)(s.Z,{children:(0,x.jsx)(c.Z,{component:"main",maxWidth:"sm",children:(0,x.jsxs)(d.Z,{component:"form",onSubmit:function(t){Z(!0),e.handleOK(t).then((function(){Z(!1),k(),C(!1),S("")})).catch((function(e){console.log(e),C(!0),S(e.response.data.message)}))},children:[e.children,v&&(0,x.jsx)(u.Z,{in:v,timeout:{enter:1e3,exit:1e3},addEndListener:function(){setTimeout((function(){console.log("prova"),Z(!1),C(!1)}),4e3)},children:(0,x.jsx)(f.Z,{"data-cy":"AlertDialog",variant:"filled",color:"primary",icon:(0,x.jsx)(p.Z,{fontSize:"inherit"}),children:D})}),(0,x.jsx)("p",{}),(0,x.jsxs)(h.Z,{justifyContent:"flex-end",direction:"row",spacing:2,children:[(0,x.jsx)(m.Z,{variant:"contained",onClick:k,children:"Cancel"}),(0,x.jsx)(m.Z,{"data-cy":"ok",variant:"contained",type:"submit",disabled:g,children:"Ok"})]})]})})})]})})}},98672:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var i=n(74165),r=n(42982),o=n(1413),a=n(15861),l=n(70885),s=n(72791),c=n(57621),d=n(42169),u=n(72363),f=n(13400),h=n(36151),m=n(27247),p=n(80184);function x(e){return(0,p.jsxs)(c.Z,{raised:!0,sx:{maxWidth:"450px",height:"100%"},"data-cy":"filmCard-"+e.info.titolo+"-"+e.info.produttore,children:[(0,p.jsx)(d.Z,{component:"img",height:"350",image:e.info.image_url,title:e.info.titolo,sx:{objectFit:"cover",objectPosition:"50% 50%"}}),(0,p.jsxs)(u.Z,{children:[(0,p.jsx)(f.Z,{onClick:function(){return e.onDeleteAction()},children:(0,p.jsx)(m.Z,{color:"primary"})}),(0,p.jsx)(h.Z,{style:{marginLeft:"auto"},onClick:function(){return e.openExploreAction()},variant:"text",children:"Dettagli"})]})]})}var g=n(46727),Z=n(64554),j=n(74953),b=n(53767);function v(){return(0,p.jsxs)(Z.Z,{children:[(0,p.jsx)(j.Z,{"data-cy":"titolo",fullWidth:!0,margin:"normal",label:"Titolo",required:!0,autoComplete:"titolo",name:"titolo",sx:{"& fieldset":{borderColor:"white"}}}),(0,p.jsx)(b.Z,{direction:"row",spacing:2,sx:{mt:2},children:(0,p.jsx)(j.Z,{fullWidth:!0,"data-cy":"genere",label:"Genere",required:!0,autoComplete:"genere",name:"genere",sx:{"& fieldset":{borderColor:"white"}}})}),(0,p.jsxs)(b.Z,{direction:"row",spacing:2,sx:{mt:2},children:[(0,p.jsx)(j.Z,{"data-cy":"regia",fullWidth:!0,label:"Regia",required:!0,autoComplete:"regia",name:"regia",sx:{"& fieldset":{borderColor:"white"}}}),(0,p.jsx)(j.Z,{fullWidth:!0,"data-cy":"produttore",label:"Produttore",required:!0,autoComplete:"produttore",name:"produttore",sx:{"& fieldset":{borderColor:"white"}}})]}),(0,p.jsxs)(b.Z,{direction:"row",spacing:2,sx:{mt:2},children:[(0,p.jsx)(j.Z,{fullWidth:!0,"data-cy":"data_di_uscita",required:!0,type:"date",autoComplete:"data",name:"data",sx:{"& fieldset":{borderColor:"white"}}}),(0,p.jsx)(j.Z,{fullWidth:!0,"data-cy":"durata",label:"Durata",autoComplete:"durata",name:"durata",required:!0,sx:{"& fieldset":{borderColor:"white"}}})]}),(0,p.jsxs)(b.Z,{direction:"row",spacing:2,sx:{mt:2},children:[(0,p.jsx)(j.Z,{fullWidth:!0,"data-cy":"trama",label:"Trama",autoComplete:"trama",name:"trama",multiline:!0,required:!0,sx:{"& fieldset":{borderColor:"white"}}}),(0,p.jsx)(j.Z,{fullWidth:!0,"data-cy":"locandina",label:"Locandina",autoComplete:"locandina",name:"locandina",type:"url",required:!0,sx:{"& fieldset":{borderColor:"white"}}})]}),(0,p.jsx)("p",{})]})}var C=n(49877),y=n(61889),w=n(47047),D=n(68087),S=n(25578),k=n(15021),_=n(20890),P=n(49900),W=n(5289),A=n(65661),F=n(94721),q=n(39157),O=n(90493),z=n(97123),I=function(e){var t=e.label,n=e.children;return(0,p.jsxs)(k.ZP,{alignItems:"flex-start",children:[(0,p.jsx)(_.Z,{variant:"overline",color:"primary",style:{paddingRight:4,minWidth:150,textAlign:"fixed-start"},children:t}),(0,p.jsx)(P.Z,{children:(0,p.jsx)(_.Z,{variant:"body2",children:n})})]})};function E(e){return(0,p.jsxs)(W.Z,{open:e.openDialog,fullWidth:!0,maxWidth:"sm",onClose:e.setCloseDialog,children:[(0,p.jsx)(A.Z,{align:"center",children:e.info.titolo}),(0,p.jsx)(F.Z,{}),(0,p.jsx)(q.Z,{children:(0,p.jsxs)(O.Z,{children:[(0,p.jsx)(I,{label:"Genere",children:e.info.genere}),(0,p.jsxs)(I,{label:"Durata",children:[e.info.durata," minuti"]}),(0,p.jsx)(I,{label:"Regia",children:e.info.regia}),(0,p.jsx)(I,{label:"Produttore",children:e.info.produttore}),(0,p.jsx)(I,{label:"Data di Uscita",children:e.info.data_uscita}),(0,p.jsx)(I,{label:"Trama",children:e.info.trama})]})}),(0,p.jsx)(z.Z,{children:(0,p.jsx)(h.Z,{variant:"contained",onClick:function(){return e.setCloseDialog()},children:"Ok"})})]})}function T(e){var t=e.handleSubmit,n=e.handleDelete,i=e.loading,r=e.films,o=e.setOnDeleteIndex,a=(0,s.useState)(!1),d=(0,l.Z)(a,2),u=d[0],f=d[1],h=s.useState(!1),m=(0,l.Z)(h,2),j=m[0],b=m[1],k=s.useState(!1),_=(0,l.Z)(k,2),P=_[0],W=_[1],A=(0,s.useState)(0),F=(0,l.Z)(A,2),q=F[0],O=F[1],z=Array(12).fill("");return(0,p.jsxs)(Z.Z,{sx:{p:3},children:[(0,p.jsx)(C.Z,{"data-cy":"add_film",sx:{position:"fixed",bottom:"3%",right:"3%"},color:"primary","aria-label":"add",onClick:function(){return b(!0)},children:(0,p.jsx)(D.Z,{})}),(0,p.jsx)(g.Z,{openDialog:j,setCloseDialog:function(){return b(!1)},handleOK:t,title:"Inserisci dettagli film",children:(0,p.jsx)(v,{})}),(0,p.jsx)(g.Z,{openDialog:P,setCloseDialog:function(){return W(!1)},handleOK:n,title:"Sei sicuro di voler eliminare il film?",children:(0,p.jsx)(S.Z,{onDeleteMessage:"L'eliminazione di un film comporta l'eliminazione di tutti gli spettacoli ad esso associati"})}),r.length>0&&void 0!==r[q]&&(0,p.jsx)(E,{openDialog:u,setCloseDialog:function(){return f(!1)},info:r[q]}),(0,p.jsxs)(y.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:10,lg:12,xl:12},children:[r&&r.map((function(e,t){return(0,p.jsx)(y.ZP,{item:!0,xs:1,sm:8/3,md:2.5,lg:2.4,xl:2,"data-cy":"filmCard-"+e.titolo,children:(0,p.jsx)(x,{info:e,onDeleteAction:function(){o(t),W(!0)},openExploreAction:function(){f(!0),O(t)}})},e.codice_film)})),i&&z.map((function(e,t){return(0,p.jsx)(y.ZP,{item:!0,xs:1,sm:8/3,md:2.5,lg:2.4,xl:2,children:(0,p.jsx)(c.Z,{raised:!0,sx:{maxWidth:"450px",height:"100%"},children:(0,p.jsx)(w.Z,{height:405.5,variant:"rounded"})})},t)}))]}),(0,p.jsx)(Z.Z,{height:70})]})}var L=n(62430),K=n(74991),Q=n(60873);function R(){var e=(0,s.useState)(),t=(0,l.Z)(e,2),n=t[0],c=t[1],d=(0,s.useState)([]),u=(0,l.Z)(d,2),f=u[0],h=u[1],m=(0,s.useState)(""),x=(0,l.Z)(m,2),g=x[0],Z=x[1],j=(0,s.useState)(),b=(0,l.Z)(j,2),v=b[0],C=b[1],y=(0,s.useState)(!0),w=(0,l.Z)(y,2),D=w[0],S=w[1],k=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,a,l,s,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.currentTarget),a={titolo:n.get("titolo"),genere:n.get("genere"),cast:n.get("cast"),regia:n.get("regia"),produttore:n.get("produttore"),data_uscita:n.get("data"),durata:n.get("durata"),trama:n.get("trama"),image_url:n.get("locandina")},e.prev=3,e.next=6,K.t.createFilm(a);case 6:l=e.sent,console.log(l),s=(0,o.Z)({codice_film:l.data.codice_film},a),(c=(0,r.Z)(f)).push(s),h(c),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(3),e.t0;case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o=f[n].codice_film,e.prev=2,e.next=5,K.t.deleteFilm(o);case 5:e.sent,(a=(0,r.Z)(f)).splice(n,1),h((0,r.Z)(a)),console.log("Film cancellato correttamente"),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(2),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K.t.getAllFilms().then((function(e){var t=e.data.map((function(e){return new Q.Z(e)}));h(t),S(!1)})).catch((function(e){console.log(e),C(!0),Z(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){P()}),[]),v?(0,p.jsx)(L.Z,{error:g}):(0,p.jsx)(T,{handleSubmit:k,handleDelete:_,loading:D,films:f,setOnDeleteIndex:c})}},60873:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(43144),r=n(15671),o=(0,i.Z)((function e(t){(0,r.Z)(this,e),this.codice_film=t.codice_film,this.data_uscita=t.data_uscita,this.produttore=t.produttore,this.regia=t.regia,this.durata=t.durata,this.titolo=t.titolo,this.genere=t.genere,this.trama=t.trama,this.image_url=t.image_url}))},62430:function(e,t,n){n.d(t,{Z:function(){return d}});n(72791);var i=n(64554),r=n(53767),o=n(61889),a=n(20890),l=n(15021),s=n(57689),c=n(80184);function d(e){var t,n,d;(0,s.s0)();return(0,c.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"85vh"},children:(0,c.jsxs)(r.Z,{direction:"row",spacing:2,children:[(0,c.jsx)(l.ZP,{children:(0,c.jsxs)(o.ZP,{children:[(0,c.jsx)(a.Z,{variant:"h1",children:null===(t=e.error.response)||void 0===t?void 0:t.status}),(0,c.jsx)(a.Z,{variant:"h5",children:null===(n=e.error)||void 0===n?void 0:n.code}),(0,c.jsx)(a.Z,{variant:"h6",children:null===(d=e.error.response)||void 0===d?void 0:d.data.message}),(0,c.jsx)("p",{})]})}),(0,c.jsx)(l.ZP,{children:(0,c.jsx)(o.ZP,{children:(0,c.jsx)("img",{src:"/ErrorImage.png",alt:"",width:500,height:500})})})]})})}}}]);
//# sourceMappingURL=672.09403aa6.chunk.js.map