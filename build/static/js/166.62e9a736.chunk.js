"use strict";(self.webpackChunkmetropolisad=self.webpackChunkmetropolisad||[]).push([[166],{9772:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(1413),i=n(885),o=n(225),a=n(4554),s=[.6,-.05,.01,.99],c={opacity:1,y:0,transition:{duration:.6,ease:s,delay:.16}},l=(0,o.Z)("div")({height:"100vh",display:"grid",placeItems:"center"}),d=(0,o.Z)(a.Z)({textAlign:"center"}),u=(0,o.Z)("div")({maxWidth:600,padding:25,margin:"auto",display:"flex",justifyContent:"center",flexDirection:"column",background:"#292828"}),m={initial:{y:60,opacity:0,transition:{duration:.6,ease:s}},animate:{y:0,opacity:1,transition:{duration:.6,ease:s}}},p=n(1614),f=n(890),h=n(1554),x=n(2003),w=n(9658),Z=n(5773),g=n(2791),v=n(1087),y=n(184),j=function(){return(0,y.jsx)(a.Z,{minHeight:180,children:(0,y.jsxs)(v.rU,{to:"/",children:[(0,y.jsx)("p",{}),(0,y.jsx)(a.Z,{component:"img",src:"logo128.png",alt:"logo"})]})})},b=n(9709),C=n(4098);function P(e){var t=(0,g.useState)(!1),n=(0,i.Z)(t,2),o=n[0],s=n[1],v=(0,g.useState)(),P=(0,i.Z)(v,2),S=P[0],k=P[1],q=(0,g.useState)(!1),W=(0,i.Z)(q,2),I=W[0],L=W[1];return(0,y.jsx)(l,{children:(0,y.jsx)(p.Z,{maxWidth:"sm",component:"form",onSubmit:function(t){L(!0),e.handleSubmit(t).then((function(){s(!1),k("")})).catch((function(e){console.log(e),L(!1),k(e.message),s(!0)}))},children:(0,y.jsxs)(u,{children:[(0,y.jsxs)(d,(0,r.Z)((0,r.Z)({component:C.E.div},m),{},{children:[(0,y.jsx)(j,{}),(0,y.jsx)(f.Z,{sx:{color:"text.secondary",mb:5},children:e.title})]})),(0,y.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column"},component:C.E.div,initial:{opacity:0,y:40},animate:c,children:e.children}),(0,y.jsxs)(a.Z,{component:C.E.div,initial:{opacity:0,y:20},animate:c,children:[(0,y.jsx)(b.Z,{name:"loadingButton",fullWidth:!0,size:"large",type:"submit","data-cy":"loginButton",variant:"contained",loading:I,loadingIndicator:(0,y.jsx)(h.Z,{color:"primary",size:16}),children:I?"loading...":e.buttonLabel}),(0,y.jsx)("p",{}),o&&(0,y.jsx)(x.Z,{in:o,timeout:{enter:1e3,exit:1e3},addEndListener:function(){setTimeout((function(){s(!1)}),4e3)},children:(0,y.jsx)(w.Z,{"data-cy":"alertLogin",variant:"filled",color:"primary",icon:(0,y.jsx)(Z.Z,{fontSize:"inherit"}),children:S})})]})]})})})}},1166:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var r=n(4165),i=n(5861),o=n(885),a=n(2791),s=n(3710),c=n(9569),l=n(4554),d=n(4953),u=n(3466),m=n(3400),p=n(3767),f=n(890),h=n(184),x=function(e){var t=e.resendConfirmationCode,n=(0,a.useState)(!1),r=(0,o.Z)(n,2),i=r[0],x=r[1];return(0,h.jsxs)(l.Z,{children:[(0,h.jsx)(d.Z,{fullWidth:!0,autoComplete:"off","data-cy":"codice_verifica",label:"Codice di verifica",name:"verificationCode",margin:"normal",required:!0,type:"number",sx:{"& fieldset":{borderColor:"white"}}}),(0,h.jsx)(d.Z,{margin:"normal",fullWidth:!0,autoComplete:"off","data-cy":"new_password",type:i?"text":"password",label:"Nuova password",name:"newPassword",sx:{"& fieldset":{borderColor:"white"}},InputProps:{endAdornment:(0,h.jsx)(u.Z,{position:"end",children:(0,h.jsx)(m.Z,{onClick:function(){return x((function(e){return!e}))},children:i?(0,h.jsx)(s.Z,{color:"primary"}):(0,h.jsx)(c.Z,{color:"primary"})})})}}),(0,h.jsx)(d.Z,{margin:"normal",fullWidth:!0,"data-cy":"confirm_new_password",autoComplete:"off",type:i?"text":"password",label:"Conferma nuova password",name:"confirmNewPassword",sx:{"& fieldset":{borderColor:"white"}},InputProps:{endAdornment:(0,h.jsx)(u.Z,{position:"end",children:(0,h.jsx)(m.Z,{onClick:function(){return x((function(e){return!e}))},children:i?(0,h.jsx)(s.Z,{color:"primary"}):(0,h.jsx)(c.Z,{color:"primary"})})})}}),(0,h.jsx)(p.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{my:2},children:(0,h.jsx)(f.Z,{onClick:t,alignContent:"center",color:"primary",variant:"subtitle2",underline:"hover",children:"  Non hai ricevuto il codice di verifica? Clicca qui per re-inviarlo"})})]})},w=n(7689),Z=n(4345),g=n.n(Z),v=n(4021),y=n(5967),j=n(7854),b=n(2346),C=n(9772);function P(){g()(v),j.default.configure(y.Z);var e=(0,w.s0)(),t=(0,a.useState)(!1),n=(0,o.Z)(t,2),s=(n[0],n[1],(0,a.useState)(!1)),c=(0,o.Z)(s,2),l=(c[0],c[1],(0,a.useState)()),d=(0,o.Z)(l,2),u=(d[0],d[1],(0,w.TH)().state.email),m=v.object().shape({verificationCode:v.string().required("Verification code is required"),password:v.string().required("Password is required").min(8,"Password is too short - shoud be 8 chars minimum.").minLowercase(1,"password must contain at least 1 lower case letter").minUppercase(1,"password must contain at least 1 upper case letter").minNumbers(1,"password must contain at least 1 number").minSymbols(1,"password must contain at least 1 special character"),confirmPassword:v.string().oneOf([v.ref("password"),null],"Passwords must match")}),p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.g.forgotPassword(u);case 3:console.log("code resent successfully"),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i,o,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),i=new FormData(n.currentTarget),o=i.get("verificationCode"),a=i.get("newPassword"),t.prev=4,t.next=7,m.validate({verificationCode:i.get("verificationCode"),password:i.get("newPassword"),confirmPassword:i.get("confirmNewPassword")},{strict:!0});case 7:return t.sent,t.next=10,b.g.forgotPasswordSubmit(u,o,a);case 10:s=t.sent,console.log(s),e("/login"),t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(4),t.t0;case 18:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e){return t.apply(this,arguments)}}();return(0,h.jsx)(C.Z,{handleSubmit:f,title:"\xc8 stato inviato un codice di verifica all'email indicata",buttonLabel:"Reimposta password",children:(0,h.jsx)(x,{resendConfirmationCode:p})})}}}]);
//# sourceMappingURL=166.62e9a736.chunk.js.map