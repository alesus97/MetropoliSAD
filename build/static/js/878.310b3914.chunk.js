"use strict";(self.webpackChunkmetropolisad=self.webpackChunkmetropolisad||[]).push([[878],{4991:function(e,t,n){n.d(t,{t:function(){return o}});var i=n(8051),r="cinema-sad",o={getAllSpettacoli:function(e){return i.b.get(r,"/cinema/".concat(e,"/spettacoli"),{response:!0})},deleteSpettacolo:function(e){return i.b.del(r,"/spettacoli/".concat(e),{response:!0})},createSpettacolo:function(e,t){var n={body:t,response:!0};return i.b.post(r,"/sale/".concat(e,"/spettacoli"),n)},getAllSale:function(e){return i.b.get(r,"/cinema/".concat(e,"/sale"),{response:!0})},deleteSala:function(e){return i.b.del(r,"/sale/".concat(e),{response:!0})},createSala:function(e,t){var n={body:t,response:!0};return i.b.post(r,"/cinema/".concat(e,"/sale"),n)},getAllFilms:function(){return i.b.get(r,"/film",{response:!0})},deleteFilm:function(e){return i.b.del(r,"/film/".concat(e),{response:!0})},createFilm:function(e){var t={body:e,response:!0};return i.b.post(r,"/film",t)},getAllQuestions:function(e){return i.b.get(r,"/film/".concat(e,"/domande"),{response:!0})},deleteQuestion:function(e){return i.b.del(r,"/domande/".concat(e),{response:!0})},createQuestion:function(e,t){var n={body:t,response:!0};return i.b.post(r,"/film/".concat(e,"/domande"),n)},getAllPrizes:function(){return i.b.get(r,"/premi",{response:!0})},deletePrize:function(e){return i.b.del(r,"/premi/".concat(e),{response:!0})},createPrize:function(e){var t={body:e,response:!0};return i.b.post(r,"/premi",t)},getAllCinemas:function(){return i.b.get(r,"/cinema",{response:!0})},deleteCinema:function(e){return i.b.del(r,"/cinema/".concat(e),{response:!0})},createCinema:function(e){var t={body:e,response:!0};return i.b.post(r,"/cinema",t)},getPostiDisponibili:function(e){return i.b.get(r,"/spettacoli/".concat(e,"/disponibilita"),{response:!0})},getBiglietti:function(){return i.b.get(r,"/biglietti",{response:!0})},createBiglietto:function(e,t){var n={body:e,response:!0};return i.b.post(r,"/spettacoli/".concat(t,"/biglietti"),n)},getProfilo:function(){return i.b.get(r,"/user",{response:!0})}}},5578:function(e,t,n){n.d(t,{Z:function(){return c}});n(2791);var i=n(9157),r=n(1691),o=n(3767),a=n(890),s=n(753),l=n(184);function c(e){return(0,l.jsx)(i.Z,{children:(0,l.jsx)(r.Z,{component:"div",id:"alert-dialog-description",children:(0,l.jsxs)(o.Z,{justifyContent:"space-between",direction:{xs:"column",sm:"row"},spacing:2,children:[(0,l.jsx)(s.Z,{color:"error"}),(0,l.jsxs)(a.Z,{textAlign:"center",children:[" ",e.onDeleteMessage]}),(0,l.jsx)(s.Z,{color:"error"})]})})})}},6727:function(e,t,n){n.d(t,{Z:function(){return x}});var i=n(885),r=n(2791),o=n(5289),a=n(5661),s=n(4721),l=n(9157),c=n(1614),d=n(4554),u=n(2003),p=n(9658),h=n(3767),f=n(6151),m=n(5773),Z=n(184);function x(e){var t=(0,r.useState)(!1),n=(0,i.Z)(t,2),x=n[0],g=n[1],v=(0,r.useState)(!1),j=(0,i.Z)(v,2),b=j[0],S=j[1],w=(0,r.useState)([]),y=(0,i.Z)(w,2),z=y[0],_=y[1],P=function(){e.setCloseDialog(),S(!1),_("")};return(0,Z.jsx)("div",{children:(0,Z.jsxs)(o.Z,{open:e.openDialog,fullWidth:!0,maxWidth:"sm",onClose:P,children:[(0,Z.jsx)(a.Z,{align:"center",children:e.title}),(0,Z.jsx)(s.Z,{}),(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(c.Z,{component:"main",maxWidth:"sm",children:(0,Z.jsxs)(d.Z,{component:"form",onSubmit:function(t){g(!0),e.handleOK(t).then((function(){g(!1),P(),S(!1),_("")})).catch((function(e){console.log(e),S(!0),_(e.response.data.message)}))},children:[e.children,b&&(0,Z.jsx)(u.Z,{in:b,timeout:{enter:1e3,exit:1e3},addEndListener:function(){setTimeout((function(){console.log("prova"),g(!1),S(!1)}),4e3)},children:(0,Z.jsx)(p.Z,{"data-cy":"AlertDialog",variant:"filled",color:"primary",icon:(0,Z.jsx)(m.Z,{fontSize:"inherit"}),children:z})}),(0,Z.jsx)("p",{}),(0,Z.jsxs)(h.Z,{justifyContent:"flex-end",direction:"row",spacing:2,children:[(0,Z.jsx)(f.Z,{variant:"contained",onClick:P,children:"Cancel"}),(0,Z.jsx)(f.Z,{"data-cy":"ok",variant:"contained",type:"submit",disabled:x,children:"Ok"})]})]})})})]})})}},9878:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var i=n(4165),r=n(2982),o=n(5861),a=n(885),s=n(2791),l=n(4554),c=n(9877),d=n(9281),u=n(5527),p=n(9836),h=n(6890),f=n(5855),m=n(3994),Z=n(3382),x=n(7047),g=n(3400),v=n(8087),j=n(5397),b=n(6727),S=n(4953),w=n(3786),y=n(3466),z=n(184);function _(e){var t=e.films,n=e.sale;return(0,z.jsxs)(l.Z,{children:[(0,z.jsx)(S.Z,{margin:"normal","data-cy":"selFilm",defaultValue:"",select:!0,name:"film",fullWidth:!0,label:"Seleziona Film",required:!0,sx:{"& fieldset":{borderColor:"white"},"&   .MuiSelect-icon":{color:"#F9D159"}},children:t.map((function(e,t){return(0,z.jsx)(w.Z,{value:JSON.stringify(e),"data-cy":"sceltaFilm-"+e.titolo,children:e.titolo},t)}))}),(0,z.jsx)(S.Z,{margin:"normal","data-cy":"selSala",defaultValue:"",select:!0,name:"sala",fullWidth:!0,label:"Seleziona Sala",required:!0,sx:{"& fieldset":{borderColor:"white"},"&   .MuiSelect-icon":{color:"#F9D159"}},children:n.map((function(e,t){return(0,z.jsx)(w.Z,{value:JSON.stringify(e),"data-cy":"sceltaSala-"+e.numero_sala,children:e.numero_sala},t)}))}),(0,z.jsx)(S.Z,{label:"Data spettacolo","data-cy":"data_spettacolo",id:"standard-start-adornment",InputProps:{startAdornment:(0,z.jsx)(y.Z,{position:"start"})},type:"datetime-local",fullWidth:!0,margin:"normal",name:"data",required:!0,sx:{"& fieldset":{borderColor:"white"}}}),(0,z.jsx)(S.Z,{margin:"normal","data-cy":"prezzo_biglietto",fullWidth:!0,label:"Prezzo biglietto",type:"number",name:"prezzo",required:!0,sx:{"& fieldset":{borderColor:"white"}}})]})}var P=n(5578);function D(e){var t=e.handleSubmit,n=e.handleDelete,i=e.loading,r=e.spettacoli,o=e.setOnDeleteIndex,S=e.films,w=e.sale,y=s.useState(!1),D=(0,a.Z)(y,2),C=D[0],A=D[1],E=s.useState(!1),k=(0,a.Z)(E,2),F=k[0],I=k[1],M=Array(5).fill("");return(0,z.jsxs)(l.Z,{sx:{p:3},children:[(0,z.jsx)(c.Z,{"data-cy":"addSpettacolo",sx:{position:"fixed",bottom:"3%",right:"3%"},color:"primary","aria-label":"add",onClick:function(){return A(!0)},children:(0,z.jsx)(v.Z,{})}),(0,z.jsx)(b.Z,{openDialog:C,setCloseDialog:function(){return A(!1)},handleOK:t,title:"Inserisci dettagli spettacolo",children:(0,z.jsx)(_,{films:S,sale:w})}),(0,z.jsx)(b.Z,{openDialog:F,setCloseDialog:function(){return I(!1)},handleOK:n,title:"Sei sicuro di voler eliminare lo spettacolo?",children:(0,z.jsx)(P.Z,{onDeleteMessage:"L'azione non potr\xe0 essere annullata"})}),(0,z.jsx)(d.Z,{component:u.Z,sx:{maxHeight:"800px"},children:(0,z.jsxs)(p.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,z.jsx)(h.Z,{children:(0,z.jsxs)(f.Z,{height:70,children:[(0,z.jsx)(m.Z,{component:"th",scope:"row",width:"30%",children:"Titolo del film"}),(0,z.jsx)(m.Z,{align:"center",width:"10%",children:"Sala"}),(0,z.jsx)(m.Z,{align:"center",width:"10%",children:"Data dello spettacolo"}),(0,z.jsx)(m.Z,{align:"center",width:"10%",children:"Prezzo"}),(0,z.jsx)(m.Z,{align:"center",width:"10%",children:"Elimina"})]})}),(0,z.jsxs)(Z.Z,{children:[i&&M.map((function(e,t){return(0,z.jsxs)(f.Z,{height:70,children:[(0,z.jsx)(m.Z,{component:"th",scope:"row",width:"30%",children:(0,z.jsx)(x.Z,{})}),(0,z.jsx)(m.Z,{align:"center",width:"10%",children:(0,z.jsx)(x.Z,{})}),(0,z.jsx)(m.Z,{align:"center",width:"10%",children:(0,z.jsx)(x.Z,{})}),(0,z.jsx)(m.Z,{align:"center",width:"10%",children:(0,z.jsx)(x.Z,{})}),(0,z.jsx)(m.Z,{align:"center",width:"10%",children:(0,z.jsxs)(g.Z,{children:[" ",(0,z.jsx)(j.Z,{color:"disabled"})," "]})})]},t)})),r&&r.map((function(e,t){return(0,z.jsxs)(f.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,z.jsx)(m.Z,{component:"th",scope:"row",children:e.film.titolo}),(0,z.jsx)(m.Z,{align:"center",children:e.sala.numero_sala}),(0,z.jsx)(m.Z,{align:"center",children:e.data}),(0,z.jsxs)(m.Z,{align:"center",children:[e.prezzo," \u20ac"]}),(0,z.jsx)(m.Z,{align:"center",children:(0,z.jsx)(g.Z,{onClick:function(){I(!0),o(t)},children:(0,z.jsx)(j.Z,{color:"primary"})})})]},e.codice_spettacolo)}))]})]})}),(0,z.jsx)("p",{})]})}var C=n(4991),A=n(3144),E=n(5671),k=(0,A.Z)((function e(t){(0,E.Z)(this,e),this.codice_spettacolo=t.codice_spettacolo,this.data=t.data,this.prezzo=t.prezzo,this.sala=t.sala,this.film=t.film})),F=n(2430),I=n(873),M=n(5282);function O(){var e=(0,s.useState)(""),t=(0,a.Z)(e,2),n=t[0],l=t[1],c=(0,s.useState)(),d=(0,a.Z)(c,2),u=d[0],p=d[1],h=(0,s.useState)([]),f=(0,a.Z)(h,2),m=f[0],Z=f[1],x=(0,s.useState)([]),g=(0,a.Z)(x,2),v=g[0],j=g[1],b=(0,s.useState)([]),S=(0,a.Z)(b,2),w=S[0],y=S[1],_=(0,s.useState)(),P=(0,a.Z)(_,2),A=P[0],E=P[1],O=(0,s.useState)(!0),L=(0,a.Z)(O,2),N=L[0],W=L[1],T=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(A),n=m[A].codice_spettacolo,e.prev=3,e.next=6,C.t.deleteSpettacolo(n);case 6:e.sent,(o=(0,r.Z)(m)).splice(A,1),Z((0,r.Z)(o)),console.log("Spettacolo cancellato correttamente"),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(3),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.t.getAllSpettacoli(10).then((function(e){var t=e.data.map((function(e){return new k(e)}));Z(t),W(!1)})).catch((function(e){console.log(e),p(!0),l(e)})),C.t.getAllFilms().then((function(e){var t=e.data.map((function(e){return new I.Z(e)}));j(t),W(!1)})).catch((function(e){console.log(e),p(!0),l(e)})),C.t.getAllSale().then((function(e){var t=e.data.map((function(e){return new M.Z(e)}));y(t),W(!1)})).catch((function(e){console.log(e),p(!0),l(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){q()}),[]);var H=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,a,s,l,c,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.currentTarget),o=JSON.parse(n.get("sala")),a=JSON.parse(n.get("film")),s={codice_film:a.codice_film,data_ora:n.get("data"),prezzo:n.get("prezzo")},e.prev=5,e.next=8,C.t.createSpettacolo(o.id_sala,s);case 8:l=e.sent,console.log(l),c={codice_spettacolo:l.data.codice_spettacolo,data:n.get("data").replace(/T/," "),prezzo:n.get("prezzo"),sala:{id_sala:o.id_sala,numero_sala:o.numero_sala},film:{codice_film:a.codice_film,titolo:a.titolo,durata:a.durata}},(d=(0,r.Z)(m)).push(c),Z(d),e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(5),e.t0;case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}();return u?(0,z.jsx)(F.Z,{error:n}):(0,z.jsx)(D,{handleSubmit:H,handleDelete:T,loading:N,spettacoli:m,setOnDeleteIndex:E,films:v,sale:w})}},873:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(3144),r=n(5671),o=(0,i.Z)((function e(t){(0,r.Z)(this,e),this.codice_film=t.codice_film,this.data_uscita=t.data_uscita,this.produttore=t.produttore,this.regia=t.regia,this.durata=t.durata,this.titolo=t.titolo,this.genere=t.genere,this.trama=t.trama,this.image_url=t.image_url}))},5282:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(3144),r=n(5671),o=(0,i.Z)((function e(t){(0,r.Z)(this,e),this.id_sala=t.id_sala,this.numero_sala=t.numero_sala,this.codice_cinema=t.codice_cinema,this.capienza=t.capienza}))},2430:function(e,t,n){n.d(t,{Z:function(){return d}});n(2791);var i=n(4554),r=n(3767),o=n(1889),a=n(890),s=n(5021),l=n(7689),c=n(184);function d(e){var t,n,d;(0,l.s0)();return(0,c.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"85vh"},children:(0,c.jsxs)(r.Z,{direction:"row",spacing:2,children:[(0,c.jsx)(s.ZP,{children:(0,c.jsxs)(o.ZP,{children:[(0,c.jsx)(a.Z,{variant:"h1",children:null===(t=e.error.response)||void 0===t?void 0:t.status}),(0,c.jsx)(a.Z,{variant:"h5",children:null===(n=e.error)||void 0===n?void 0:n.code}),(0,c.jsx)(a.Z,{variant:"h6",children:null===(d=e.error.response)||void 0===d?void 0:d.data.message}),(0,c.jsx)("p",{})]})}),(0,c.jsx)(s.ZP,{children:(0,c.jsx)(o.ZP,{children:(0,c.jsx)("img",{src:"/ErrorImage.png",alt:"",width:500,height:500})})})]})})}},5397:function(e,t,n){var i=n(6189),r=n(184);t.Z=(0,i.Z)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},3466:function(e,t,n){n.d(t,{Z:function(){return w}});var i=n(4942),r=n(3366),o=n(7462),a=n(2791),s=n(8182),l=n(4419),c=n(4036),d=n(890),u=n(3840),p=n(2930),h=n(6934),f=n(5878),m=n(1217);function Z(e){return(0,m.Z)("MuiInputAdornment",e)}var x,g=(0,f.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),v=n(1402),j=n(184),b=["children","className","component","disablePointerEvents","disableTypography","position","variant"],S=(0,h.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["position".concat((0,c.Z)(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,o.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&(0,i.Z)({},"&.".concat(g.positionStart,"&:not(.").concat(g.hiddenLabel,")"),{marginTop:16}),"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),w=a.forwardRef((function(e,t){var n=(0,v.Z)({props:e,name:"MuiInputAdornment"}),i=n.children,h=n.className,f=n.component,m=void 0===f?"div":f,g=n.disablePointerEvents,w=void 0!==g&&g,y=n.disableTypography,z=void 0!==y&&y,_=n.position,P=n.variant,D=(0,r.Z)(n,b),C=(0,p.Z)()||{},A=P;P&&C.variant,C&&!A&&(A=C.variant);var E=(0,o.Z)({},n,{hiddenLabel:C.hiddenLabel,size:C.size,disablePointerEvents:w,position:_,variant:A}),k=function(e){var t=e.classes,n=e.disablePointerEvents,i=e.hiddenLabel,r=e.position,o=e.size,a=e.variant,s={root:["root",n&&"disablePointerEvents",r&&"position".concat((0,c.Z)(r)),a,i&&"hiddenLabel",o&&"size".concat((0,c.Z)(o))]};return(0,l.Z)(s,Z,t)}(E);return(0,j.jsx)(u.Z.Provider,{value:null,children:(0,j.jsx)(S,(0,o.Z)({as:m,ownerState:E,className:(0,s.Z)(k.root,h),ref:t},D,{children:"string"!==typeof i||z?(0,j.jsxs)(a.Fragment,{children:["start"===_?x||(x=(0,j.jsx)("span",{className:"notranslate",children:"\u200b"})):null,i]}):(0,j.jsx)(d.Z,{color:"text.secondary",children:i})}))})}))}}]);
//# sourceMappingURL=878.310b3914.chunk.js.map